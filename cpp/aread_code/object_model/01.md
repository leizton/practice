# 各种class的内存布局

● plain class, no virtual method
    [@ref](../cpp_base/alignof_offsetof.md)

○ virtual ~Aoo() {}

○ virtual vfn()

○ virtual pvfn() = 0，基类的布局和派生类的布局

○ 多层virtual


# details
两种 data_member(DM): static nonstatic
三种 func_member(FM): static nonstatic virtual

## slot模型
[img](../imgs/object_model_01.jpg)
每个member有一个slot, slot放指针
  DM slot 存堆上内存地址
  FM slot 存函数地址
好处
  member的存储空间不会因类型不同而不同, class的大小很容易确定(指针大小 × 成员个数)

## 实际采用的模型
- static_DM static_FM nonstatic_FM 放在 object 外
- nonstatic_DM 放在 object 内
- class 有一个虚函数表 virtual_table(vtbl)
  object 有一个指向vtbl的指针vptr, 构造器/拷贝构造器自动设置vptr
